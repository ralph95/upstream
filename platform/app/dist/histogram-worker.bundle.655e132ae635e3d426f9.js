/*! For license information please see histogram-worker.bundle.655e132ae635e3d426f9.js.LICENSE.txt */
(()=>{var e,n,t={57153:(e,n,t)=>{"use strict";const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,l={canHandle:e=>c(e)&&e[r],serialize(e){const{port1:n,port2:t}=new MessageChannel;return f(e,n),[t,[t]]},deserialize:e=>(e.start(),function(e,n){const t=new Map;return e.addEventListener("message",function(e){const{data:n}=e;if(!n||!n.id)return;const r=t.get(n.id);if(r)try{r(n)}finally{t.delete(n.id)}}),y(e,t,[],n)}(e))},u=new Map([["proxy",l],["throw",{canHandle:e=>c(e)&&s in e,serialize({value:e}){let n;return n=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[n,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function f(e,n=globalThis,t=["*"]){n.addEventListener("message",function a(i){if(!i||!i.data)return;if(!function(e,n){for(const t of e){if(n===t||"*"===t)return!0;if(t instanceof RegExp&&t.test(n))return!0}return!1}(t,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:c,type:l,path:u}=Object.assign({path:[]},i.data),d=(i.data.argumentList||[]).map(E);let m;try{const n=u.slice(0,-1).reduce((e,n)=>e[n],e),t=u.reduce((e,n)=>e[n],e);switch(l){case"GET":m=t;break;case"SET":n[u.slice(-1)[0]]=E(i.data.value),m=!0;break;case"APPLY":m=t.apply(n,d);break;case"CONSTRUCT":m=function(e){return Object.assign(e,{[r]:!0})}(new t(...d));break;case"ENDPOINT":{const{port1:n,port2:t}=new MessageChannel;f(e,t),m=function(e,n){return v.set(e,n),e}(n,[n])}break;case"RELEASE":m=void 0;break;default:return}}catch(e){m={value:e,[s]:0}}Promise.resolve(m).catch(e=>({value:e,[s]:0})).then(t=>{const[r,i]=w(t);n.postMessage(Object.assign(Object.assign({},r),{id:c}),i),"RELEASE"===l&&(n.removeEventListener("message",a),p(n),o in e&&"function"==typeof e[o]&&e[o]())}).catch(e=>{const[t,r]=w({value:new TypeError("Unserializable return value"),[s]:0});n.postMessage(Object.assign(Object.assign({},t),{id:c}),r)})}),n.start&&n.start()}function p(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function d(e){if(e)throw new Error("Proxy has been released and is not useable")}function m(e){return x(e,new Map,{type:"RELEASE"}).then(()=>{p(e)})}const g=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(g.get(e)||0)-1;g.set(e,n),0===n&&m(e)});function y(e,n,t=[],r=function(){}){let o=!1;const s=new Proxy(r,{get(r,a){if(d(o),a===i)return()=>{!function(e){h&&h.unregister(e)}(s),m(e),n.clear(),o=!0};if("then"===a){if(0===t.length)return{then:()=>s};const r=x(e,n,{type:"GET",path:t.map(e=>e.toString())}).then(E);return r.then.bind(r)}return y(e,n,[...t,a])},set(r,a,i){d(o);const[s,c]=w(i);return x(e,n,{type:"SET",path:[...t,a].map(e=>e.toString()),value:s},c).then(E)},apply(r,i,s){d(o);const c=t[t.length-1];if(c===a)return x(e,n,{type:"ENDPOINT"}).then(E);if("bind"===c)return y(e,n,t.slice(0,-1));const[l,u]=b(s);return x(e,n,{type:"APPLY",path:t.map(e=>e.toString()),argumentList:l},u).then(E)},construct(r,a){d(o);const[i,s]=b(a);return x(e,n,{type:"CONSTRUCT",path:t.map(e=>e.toString()),argumentList:i},s).then(E)}});return function(e,n){const t=(g.get(n)||0)+1;g.set(n,t),h&&h.register(e,n,e)}(s,e),s}function b(e){const n=e.map(w);return[n.map(e=>e[0]),(t=n.map(e=>e[1]),Array.prototype.concat.apply([],t))];var t}const v=new WeakMap;function w(e){for(const[n,t]of u)if(t.canHandle(e)){const[r,a]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},a]}return[{type:"RAW",value:e},v.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function x(e,n,t,r){return new Promise(a=>{const i=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");n.set(i,a),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r)})}var O=t(58498),S=t(42008);f({getRange:({dimensions:e,origin:n,direction:t,spacing:r,scalarData:a})=>{const i=O.Ay.newInstance();i.setDimensions(e),i.setOrigin(n),i.setDirection(t),i.setSpacing(r);const o=S.Ay.newInstance({name:"Pixels",numberOfComponents:1,values:a});i.getPointData().setScalars(o),i.modified();return i.computeHistogram(i.getBounds())},calcHistogram:({data:e,options:n})=>{void 0===n&&(n={});const t={numBins:n.numBins||256,range:{min:0,max:0},bins:new Int32Array(1),maxBin:0,maxBinValue:0};let r=n.min,a=n.max;if(void 0===r||void 0===a){let n=1/0,t=-1/0,i=e.length;for(;i--;){const r=e[i];r<n&&(n=r),r>t&&(t=r)}r=n,a=t}t.range={min:r,max:a};const i=new Int32Array(t.numBins),o=t.numBins/(a-r);for(let n=0;n<e.length;n++){const t=e[n];if(t<r)continue;if(t>a)continue;i[Math.floor((t-r)*o)]+=1}t.bins=i,t.maxBin=0,t.maxBinValue=0;for(let e=0;e<t.numBins;e++)t.bins[e]>t.maxBinValue&&(t.maxBin=e,t.maxBinValue=t.bins[e]);return t}})},89288:()=>{}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,a.x=()=>{var e=a.O(void 0,[573,9742],()=>a(57153));return e=a.O(e)},a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},e=[],a.O=(n,t,r,i)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,r,i]=e[u],s=!0,c=0;c<t.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](t[c]))?t.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var l=r();void 0!==l&&(n=l)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[t,r,i]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((n,t)=>(a.f[t](e,n),n),[])),a.u=e=>e+".bundle."+{573:"1f585e352fdde0071d64",9742:"90085ecfc542a821107c"}[e]+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="/",(()=>{var e={3054:1,3694:1,572:1};a.f.i=(n,t)=>{e[n]||importScripts(a.p+a.u(n))};var n=globalThis.webpackChunk=globalThis.webpackChunk||[],t=n.push.bind(n);n.push=n=>{var[r,i,o]=n;for(var s in i)a.o(i,s)&&(a.m[s]=i[s]);for(o&&o(a);r.length;)e[r.pop()]=1;t(n)}})(),n=a.x,a.x=()=>Promise.all([a.e(573),a.e(9742)]).then(n);a.x()})();
//# sourceMappingURL=histogram-worker.bundle.655e132ae635e3d426f9.js.map