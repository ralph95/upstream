"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[4202],{74202:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n=i(97598),a=i.n(n),s=i(86326),r=i(96283),o=i(37948);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(null,arguments)}function c(e){const{displaySets:t,children:i,viewportOptions:n,displaySetOptions:a,servicesManager:c}=e,p=n.viewportId,{displaySetService:u,segmentationService:d,uiNotificationService:S,customizationService:y}=c.services;if(1!==t.length)throw new Error("PMAP viewport must have a single display set");const v=y.getCustomization("ui.loadingIndicatorTotalPercent"),w=t[0],[I,m]=(0,r.ihW)(),f=(0,s.useRef)(null),{viewports:g,activeViewportId:b}=I,h=w.getReferenceDisplaySet(),D=function(e,t){const{SharedFunctionalGroupsSequence:i}=t.instance,n=Array.isArray(i)?i[0]:i,{PixelMeasuresSequence:a}=n,s=Array.isArray(a)?a[0]:a,{SpacingBetweenSlices:r,SliceThickness:o}=s,l=e.images[0],c={PatientID:l.PatientID,PatientName:l.PatientName,PatientSex:l.PatientSex,PatientAge:l.PatientAge,SliceThickness:l.SliceThickness||o,StudyDate:l.StudyDate,SeriesDescription:l.SeriesDescription,SeriesInstanceUID:l.SeriesInstanceUID,SeriesNumber:l.SeriesNumber,ManufacturerModelName:l.ManufacturerModelName,SpacingBetweenSlices:l.SpacingBetweenSlices||r};return c}(h,w);f.current={displaySet:h,metadata:D};const[E,P]=(0,s.useState)(!w.isLoaded);(0,s.useEffect)(()=>{const{unsubscribe:e}=d.subscribe(d.EVENTS.SEGMENTATION_LOADING_COMPLETE,e=>{e.pmapDisplaySet?.displaySetInstanceUID===w.displaySetInstanceUID&&P(!1)});return()=>{e()}},[w]);const T=(0,s.useCallback)(()=>{const{displaySet:t}=f.current;a.unshift({});const[i]=a;return i.options=i.options??{},Object.assign(i.options,{colormap:{name:"rainbow_2",opacity:[{value:0,opacity:0},{value:.25,opacity:.25},{value:.5,opacity:.5},{value:.75,opacity:.75},{value:.9,opacity:.99}]},voi:{windowCenter:50,windowWidth:100}}),S.show({title:"Parametric Map",type:"warning",message:"The values are multiplied by 100 in the viewport for better visibility"}),s.createElement(o.OHIFCornerstoneViewport,l({},e,{displaySets:[t,w],viewportOptions:{viewportType:"volume",orientation:n.orientation,viewportId:n.viewportId,presentationIds:n.presentationIds},displaySetOptions:[{},i]}))},[a,e,w,n.orientation,n.viewportId,n.presentationIds,S]);(0,s.useEffect)(()=>{const e=u.subscribe(u.EVENTS.DISPLAY_SETS_REMOVED,({displaySetInstanceUIDs:e})=>{const t=g.get(b);e.includes(t.displaySetInstanceUID)&&m.setDisplaySetsForViewport({viewportId:b,displaySetInstanceUIDs:[]})});return()=>{e.unsubscribe()}},[b,u,m,g]);let N=null;return i&&i.length&&(N=i.map((e,t)=>e&&s.cloneElement(e,{viewportId:p,key:t}))),s.createElement(s.Fragment,null,s.createElement("div",{className:"relative flex h-full w-full flex-row overflow-hidden"},E&&s.createElement(v,{className:"h-full w-full",totalNumbers:null,percentComplete:null,loadingText:"Loading Parametric Map..."}),T(),N))}c.propTypes={displaySets:a().arrayOf(a().object),viewportId:a().string.isRequired,dataSource:a().object,children:a().node};const p=c}}]);
//# sourceMappingURL=4202.bundle.6f7fb98f01c27442b797.js.map