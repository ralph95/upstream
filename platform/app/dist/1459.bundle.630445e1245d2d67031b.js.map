{"version":3,"file":"1459.bundle.630445e1245d2d67031b.js","mappings":"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","sources":["webpack:///../../../modes/microscopy/src/id.js","webpack:///../../../modes/microscopy/src/toolbarButtons.ts","webpack:///../../../modes/microscopy/src/index.tsx"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\n\r\nexport { id };\r\n","import type { Button } from '@ohif/core/types';\r\nimport i18n from 'i18next';\r\n\r\nexport const setToolActiveToolbar = {\r\n  commandName: 'setToolActive',\r\n  commandOptions: {\r\n    toolName: 'line',\r\n  },\r\n  context: 'MICROSCOPY',\r\n};\r\n\r\nconst toolbarButtons: Button[] = [\r\n  {\r\n    id: 'MeasurementTools',\r\n    uiType: 'ohif.toolButtonList',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'line',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-length',\r\n      label: i18n.t('Buttons:Line'),\r\n      tooltip: i18n.t('Buttons:Line Tool'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'point',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-point',\r\n      label: i18n.t('Buttons:Point'),\r\n      tooltip: i18n.t('Buttons:Point Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'point' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'polygon',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-polygon',\r\n      label: i18n.t('Buttons:Polygon'),\r\n      tooltip: i18n.t('Buttons:Polygon Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'polygon' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'circle',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-circle',\r\n      label: i18n.t('Buttons:Circle'),\r\n      tooltip: i18n.t('Buttons:Circle Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'circle' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'box',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-rectangle',\r\n      label: i18n.t('Buttons:Box'),\r\n      tooltip: i18n.t('Buttons:Box Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'box' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'freehandpolygon',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-freehand-polygon',\r\n      label: i18n.t('Buttons:Freehand Polygon'),\r\n      tooltip: i18n.t('Buttons:Freehand Polygon Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'freehandpolygon' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'freehandline',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-freehand-line',\r\n      label: i18n.t('Buttons:Freehand Line'),\r\n      tooltip: i18n.t('Buttons:Freehand Line Tool'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'freehandline' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'dragPan',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-move',\r\n      label: i18n.t('Buttons:Pan'),\r\n      commands: {\r\n        ...setToolActiveToolbar,\r\n        commandOptions: { toolName: 'dragPan' },\r\n      },\r\n      evaluate: 'evaluate.microscopyTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TagBrowser',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'dicom-tag-browser',\r\n      label: i18n.t('Buttons:Dicom Tag Browser'),\r\n      tooltip: i18n.t('Buttons:Dicom Tag Browser'),\r\n      commands: 'openDICOMTagViewer',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n","import i18n from 'i18next';\r\n\r\nimport { id } from './id';\r\nimport toolbarButtons from './toolbarButtons';\r\n\r\nconst ohif = {\r\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\r\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\r\n  hangingProtocols: '@ohif/extension-default.hangingProtocolModule.default',\r\n  leftPanel: '@ohif/extension-default.panelModule.seriesList',\r\n  rightPanel: '@ohif/extension-dicom-microscopy.panelModule.measure',\r\n};\r\n\r\nexport const cornerstone = {\r\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\r\n};\r\n\r\nconst dicomvideo = {\r\n  sopClassHandler: '@ohif/extension-dicom-video.sopClassHandlerModule.dicom-video',\r\n  viewport: '@ohif/extension-dicom-video.viewportModule.dicom-video',\r\n};\r\n\r\nconst dicompdf = {\r\n  sopClassHandler: '@ohif/extension-dicom-pdf.sopClassHandlerModule.dicom-pdf',\r\n  viewport: '@ohif/extension-dicom-pdf.viewportModule.dicom-pdf',\r\n};\r\n\r\nconst extensionDependencies = {\r\n  // Can derive the versions at least process.env.from npm_package_version\r\n  '@ohif/extension-default': '^3.0.0',\r\n  '@ohif/extension-cornerstone': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-sr': '^3.0.0',\r\n  '@ohif/extension-dicom-pdf': '^3.0.1',\r\n  '@ohif/extension-dicom-video': '^3.0.1',\r\n  '@ohif/extension-dicom-microscopy': '^3.0.0',\r\n};\r\n\r\nfunction modeFactory({ modeConfiguration }) {\r\n  return {\r\n    id,\r\n    routeName: 'microscopy',\r\n    displayName: i18n.t('Modes:Microscopy'),\r\n\r\n    /**\r\n     * Lifecycle hooks\r\n     */\r\n    onModeEnter: ({ servicesManager }: withAppTypes) => {\r\n      const { toolbarService } = servicesManager.services;\r\n\r\n      toolbarService.register(toolbarButtons);\r\n      toolbarService.updateSection('primary', ['MeasurementTools', 'dragPan', 'TagBrowser']);\r\n\r\n      toolbarService.updateSection('MeasurementTools', [\r\n        'line',\r\n        'point',\r\n        'polygon',\r\n        'circle',\r\n        'box',\r\n        'freehandpolygon',\r\n        'freehandline',\r\n      ]);\r\n    },\r\n\r\n    onModeExit: ({ servicesManager }: withAppTypes) => {\r\n      const { toolbarService, uiDialogService, uiModalService } = servicesManager.services;\r\n\r\n      uiDialogService.hideAll();\r\n      uiModalService.hide();\r\n      toolbarService.reset();\r\n    },\r\n\r\n    validationTags: {\r\n      study: [],\r\n      series: [],\r\n    },\r\n\r\n    isValidMode: ({ modalities }) => {\r\n      const modalities_list = modalities.split('\\\\');\r\n\r\n      return {\r\n        valid: modalities_list.includes('SM'),\r\n        description: 'Microscopy mode only supports the SM modality',\r\n      };\r\n    },\r\n\r\n    routes: [\r\n      {\r\n        path: 'microscopy',\r\n        layoutTemplate: ({ location, servicesManager }) => {\r\n          return {\r\n            id: ohif.layout,\r\n            props: {\r\n              leftPanels: [ohif.leftPanel],\r\n              leftPanelResizable: true,\r\n              leftPanelClosed: true, // we have problem with rendering thumbnails for microscopy images\r\n              // rightPanelClosed: true, // we do not have the save microscopy measurements yet\r\n              rightPanels: [ohif.rightPanel],\r\n              rightPanelResizable: true,\r\n              viewports: [\r\n                {\r\n                  namespace: '@ohif/extension-dicom-microscopy.viewportModule.microscopy-dicom',\r\n                  displaySetsToDisplay: [\r\n                    // Share the sop class handler with cornerstone version of it\r\n                    '@ohif/extension-cornerstone.sopClassHandlerModule.DicomMicroscopySopClassHandler',\r\n                    '@ohif/extension-dicom-microscopy.sopClassHandlerModule.DicomMicroscopySRSopClassHandler',\r\n                    '@ohif/extension-dicom-microscopy.sopClassHandlerModule.DicomMicroscopyANNSopClassHandler',\r\n                  ],\r\n                },\r\n                {\r\n                  namespace: dicomvideo.viewport,\r\n                  displaySetsToDisplay: [dicomvideo.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicompdf.viewport,\r\n                  displaySetsToDisplay: [dicompdf.sopClassHandler],\r\n                },\r\n              ],\r\n            },\r\n          };\r\n        },\r\n      },\r\n    ],\r\n    extensions: extensionDependencies,\r\n    hangingProtocol: 'default',\r\n    sopClassHandlers: [\r\n      '@ohif/extension-cornerstone.sopClassHandlerModule.DicomMicroscopySopClassHandler',\r\n      '@ohif/extension-dicom-microscopy.sopClassHandlerModule.DicomMicroscopySRSopClassHandler',\r\n      '@ohif/extension-dicom-microscopy.sopClassHandlerModule.DicomMicroscopyANNSopClassHandler',\r\n      dicomvideo.sopClassHandler,\r\n      dicompdf.sopClassHandler,\r\n    ],\r\n    ...modeConfiguration,\r\n  };\r\n}\r\n\r\nconst mode = {\r\n  id,\r\n  modeFactory,\r\n  extensionDependencies,\r\n};\r\n\r\nexport default mode;\r\n"],"names":["id","packageJson","setToolActiveToolbar","commandName","commandOptions","toolName","context","uiType","props","buttonSection","icon","label","i18n","t","tooltip","commands","evaluate","ohif","cornerstone","viewport","dicomvideo","dicompdf","extensionDependencies","modeFactory","modeConfiguration","routeName","displayName","onModeEnter","servicesManager","toolbarService","services","register","toolbarButtons","updateSection","onModeExit","uiDialogService","uiModalService","hideAll","hide","reset","validationTags","study","series","isValidMode","modalities","valid","split","includes","description","routes","path","layoutTemplate","location","leftPanels","leftPanelResizable","leftPanelClosed","rightPanels","rightPanelResizable","viewports","namespace","displaySetsToDisplay","extensions","hangingProtocol","sopClassHandlers"],"sourceRoot":""}